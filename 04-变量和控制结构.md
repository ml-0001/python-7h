# 变量和控制结构

上节课介绍了 Python 的基础语法构成 ， 其中有提到几个概念:
* `顺序执行结构`
* `变量`
* `赋值语句`
* `条件语句`
* `循环语句`

我们再回顾一下, 一段代码提交给解释器执行, 解释器像人类阅读一样, 也是从左到右，从上到下 扫描代码并执行 。
所以代码中的语句在默认情况下是 `顺序执行` 。 `如果` 程序只能描述顺序的情况, 那程序能干的所有事情都是`死的`, 都是恒常不变的的批处理 .
要处理动态情况必须能是的代码可以描述`如果xxxx, 那么yyyy`这样的分支句子, 要处理指令重复执行的情况,代码还应该可以描述将代码自身可以重复执行的句子: `yyyy 执行 n 次` , 这节课主要围绕代码的`分支语句` 和 `循环语句`结构讲述 。

> 你告诉CE去水果店的路是这样的 : `下楼第一个路口左拐如果看到一棵大树右拐,然后走30米左拐走15米就到水果店门口` , 每天都要吃水果, 你告诉CE每天都去水果店。

## 变量

在分支语句和循环语句之前, 我们先着重介绍下Pytho中的变量 。

在上节课也简单提到 : `变量是值可以改变的量`。

量就是程序中所有使用到的拥有值的元素 。

程序中所用到的每一个变量都应该有一个名字作为标记 ，这个名字就叫做`标识符`． 变量名的命名规则应该遵守`标识符命名规则` .

一个变量实质上是代表了内存中的某个存储单元 (地址) ,  如程序中的某个变量 `kity_age` , 就是指用 `kity_age` 命名的某个存储单元 , 代码对变量`kity_age`进行的操作就是对该存储单元进行的操作 , 如给变量`kity_age`赋值语句 `kity_age = 3` ，实质上就是把数据3存人该变量所代表的内存单元中 , 这是`kity_age` 就是`变量名` , `kity_age` 作为变量名 , 也是一个程序中的一个`标识符`  (对代码元素进行标记取名的元素) , 所有变量名都必须符合`标识符命名规则`。


### 标识符命名规则

* 只能由大小写字母 (`[a-zA-Z]`), 下划线(`_`) 和 数字(`[0-9]`) 组成的字符串
* 不能以数字开头
* 不能与关键字重名

**注意标识符是区分大小写的,Imok和imok是不同的标识符**

#### 关键字
`关键字` 代码中为了构成某些语句 , 在语法上, `被保留`的字符串, 就像现实世界中, 您给孩子起名字不能起那些官方专有名词一样,果程序员编写的代码中自定义的标识符也不能和语言的`关键字` 相同。

比如, `if` 是构成分支语句语法的`关键字`, 如果你有个变量也叫`if`, 然后你个这个变量赋值`if=5`, 那么会让解释器程序无法区分你的表达`赋值语句`和`分支语句`, 从而出错 。

Python3 包括以下关键字:

`False`, `None`, `True`, `and`, `as`, `assert`, `async`, `await`, `break`, `class`, `continue`, `def`, `del`, `elif`, `else`, `except`, `finally`, `for`, `from`, `global`, `if`, `import`, `in`, `is`, `lambda`, `nonlocal`, `not`, `or`, `pass`, `raise`, `return`, `try`, `while`, `with`, `yield`

*你可以使用以下代码查看Python中的关键字 .*
> import keyword
> keyword.kwlist


#### 变量命名举例

* `a^12c` 是非法标识符, 包含了非法符号`^`
* `Hah hah` 是非法标识符, 包含了空格 .
* `Nid天` 是非法标识符, 包含了非法字符`天`
* `12ruok` 也是非法标识符， 以数字开头了 .
* `nonlocal` 也是非法标识符, 包含了`关键字` .
* `_12ruok` 是`合法`标识符 .
* `Nonlocal`,`If` 是`合法`标识符, 大小写和关键字不同 。


#### 标识符命名风格

程序中自定义的标识符很多, 如果标识符命名有一种统一的风格, 那么会增加代码的识别和可读性 , 尽管随意命名并不影响代码功能的正确性 。

当变量名 是由二个或多个单词组成时，通常有以下三种命名习惯:

* 单词全小写, 与单词之间使用 _下划线 连接, 如 today_is_lucky_day (unix 风格)
* 第一个单词以小写字母开始，后续单词的首字母大写, 例如：firstName、lastName (小驼峰式命名法)
* 每一个单词的首字母都采用大写字母,例如：FirstName、LastName、CamelCase (大驼峰式命名法)



## 分支结构


### 分支语句
在日常语言中, 对于假设结构的句子, 总是:
> `如果`  `断言是肯定的` , `那么` XXXX ; `否则` YYYY; 
> `如果` `今天是下雨天` , `那么`, 宅在家里打游戏 , `否则`, 去滑冰 。
这就是一个典型的分支结构, 在Python中也一样, 上节课Python语法中, 有提到的`分支语句`, 语法结构是这样的：
```python

<代码块0>

##########################
#如果表达式1的值是True , 就执行
if <逻辑表达式1> :
    
    <代码块1>

#以上条件不满足 , 那么 如果表达式2的值是True就执行接下来的代码块:
elif <逻辑表达式2> :
    
    <代码块2>

#以上条件都不满足, 那么兜底.
else:
    
    <代码块3>    
##########################

<代码块4>

```
### 逻辑表达式

语法中出现的逻辑表达式1, 逻辑表达式2, 是决定分支语句执行次序的一个测试 , 如果表达式的结果是True , `执行接下来的代码块`, 如果是False , 那么`跳过接下来的代码块` 。


### 代码块和缩进

`代码块` 是一段完整的代码 , 和整个程序的代码结构是一样的 ，就是说代码块 可以嵌套 代码块 , 比如在上述 <代码块1> 中, 实际代码可能还有 if 语句包含的子代码块 。 所以嵌套代码块需要一种形式标识出来, 其他某些语言有使用类似`{ ... }` 这种形式来标记, 而Python中使用的是`缩进对齐方`式来标记, 这样可以保证代码的优雅美观 .

如果将程序视为第一级代码块 ，那么嵌套子代码块时，规则是`子代码块语句必须左对齐 , 并相对父代码块向右缩进至少1个空白字符`, 通常每级代码块我们使用`相对4个空格字符`缩进  。

```python
<第1级代码块语句1> #第一级代码块无缩进
<第1级代码块语句2> #保持同级对齐
    <第2级代码块语句1> #相对父代码块缩进1个TAB(制表)字符
    <第2级代码块语句2> #保持同级对齐
    <第2级代码块语句3> #保持同级对齐
        <第3级代码块语句1> #相对父代码块缩进4个空格字符
        <第3级代码块语句2> #保持同级对齐
        <第3级代码块语句3> #保持同级对齐
          <第4级代码块语句1> #相对父代码块缩进2个空格字符
          <第4级代码块语句2> #保持同级对齐
          <第4级代码块语句3> #保持同级对齐
<第1级代码块语句3> #同级对齐
<第1级代码块语句4> #同级对齐
```


例子:如下代码都是合法的:
```python
if cond_var:
 print("hello1 code block with 1 white characters")
 print("hello2 code block with 1 white characters")

 if cond_var:
   print("hello1 code block with 2 white characters")
   print("hello2 code block with 2 white characters")

 if cond_var:
     print("hello1 code block with 4 white characters")
     print("hello2 code block with 4 white characters")


```

例子:语法错误的代码段:

```python
if cond_var:
 print("hello code block with 1 white characters")
   print("hello code block with 2 white characters (错误代码,应当与代码块上一行对齐,1个空格)")
     print("hello code block with 4 white characters (错误代码,应当与代码块第一行对齐,1个空格)")

```


### 分支语句执行次序

在以上的分支语句语法中,

如果<表达式1>是`True` 那么`顺序执行` <代码块1>, `然后执行`<代码块4> .

如果<表达式1>是`False` 那么`跳过` <代码块1> , `再判断` <表达式2> 得值如果是`True` , 那么执行 <代码块2>, 然后执行<代码块4> .

如果<表达式2>是`False` 那么`跳过` <代码块2> , 执行<代码块1>, 然后执行<代码块4> .


## 循环语句

如果需要一段代码要重复执行 , 只有满足某种条件时才停止重复，那么就用`循环语句`来描述 。

循环语句的语法类似分支语句 , 不过有两种结构 :
```python

`形式1-迭代式`:
for `var` in <可迭代表达式> :
    代码块语句1
    代码块语句2
    代码块语句3


`形式2-条件式`:
while <逻辑表达式> :
    代码块语句1
    代码块语句2
    代码块语句3



```
其实形式1和和形式2是等价互相变换的 , 不过在语言中直接描述的话，两种语句分别适用于常用的情景 , 很多其他语言也提供了类似的表达方式 , 所以分离开来 。 

### 迭代式
如上形式1是迭代式循环 , 代码块中引用到的变量 `var` 会分别取值可迭代表达式中的每个值 , 然后`代入`执行代码块 。

### 条件循环式
如上形式2是条件式循环 , 每次执行代码块前先判断<逻辑表达式> , 如果逻辑表达式值为True 那么就执行 , 否则循环就结束掉 。


### continue 与 break 语句
在循环代码块中，如果想`提前结束循环`那么可以使用 break 语句, 当执行到`break`语句时, 会结束当前循环 。

如果在循环代码块中, 执行到某处, 想`跳过接下来剩余代码块语句,开始下一轮循环`，那么可以用 `continue` 语句 .


## 举例

计算 (1+2+3+4+...+99)*315 的结果 整除21 的余数 如果在0到6之间 [0， 6], 那么输出haha, 如果在7-15之间 [7, 15] 那么输出hehe, 如果在16到18之间[16， 18] 输出heihei,  否则输出xixi .
程序代码如下:

```python
sum = 0
itr = 1
while itr <= 100:
    sum = sum + itr
    itr = itr + 1

r = (sum * 315) % 21

if r >= 0 and r <= 6:
    print('haha')
elif r >= 7 and r <= 15:
    print('hehe')
elif r >= 16 and r <= 18:
    print('heihei')
else:
    print('xixi')

```

可以将这段代码在VS Code 中输入保存为calc.py , 然后在命令行中运行: `python calc.py` 观察结果 。


## 代码规范

Python本身语法比较简单,并没有规定太多. 但是写代码就像写文章, 如果遵循一定大家默认守则, 可以让别人阅读的更容易, 自己写完后再阅读也能快速回忆起当时编写的思路 , 在变量命名和缩进上尽量使用有意义的名字和美观的格式来辅助解释代码 。

其中PEP8 [Python社区的语言规范建议/提案] 规范建议了Python代码中的元素,如变量,函数,对齐,命名的规范, 这样比较有Python的味道. https://pypi.org/project/pep8/

Google 公司 (Python的爸爸就在Google工作) 也推出了自己的Python代码规范建议:https://google.github.io/styleguide/pyguide.html


## 总结

本文首先回顾了上节课的语法结构, 然后介绍了变量概念 , 引入了标识符名字规范，然后再介绍了代码条件执行和循环执行的语法 和 用例， 最后再介绍了 缩进和代码规范的内容 。



## 测验

* `Python7h` 是否是合法的标识符, 那么`7h` 呢? `p7h`和 `_p7h` 和 `P7h` 呢?
* 编写代码实现 `如果表达式124050064825/22356352091 大于 2120.1 那么输出yes, 否则输出no` .
* 编写代码 `变量 luck_num 是表达式178456290742 除以 42 的余数 , 请将 hahah 输出 luck_num 次 。`






